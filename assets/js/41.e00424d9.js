(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{197:function(t,e,r){"use strict";r.r(e);var a=r(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.travis-ci.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis CI 官网文档"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("持续集成服务 Travis CI 教程 - 阮一峰"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.im/post/5a9e1a5751882555712bd8e1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis-CI自动化测试并部署至自己的CentOS服务器"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://laravel-china.org/articles/6111/travis-ci-series-automated-deployment-blog?order_by=created_at&",target:"_blank",rel:"noopener noreferrer"}},[t._v("Travis CI 系列：自动化部署博客"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://blog.csdn.net/ctypyb2002/article/details/80982982",target:"_blank",rel:"noopener noreferrer"}},[t._v("rvm，ruby的安装"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/johnnian/Blog/issues/33",target:"_blank",rel:"noopener noreferrer"}},[t._v("CentOS 安装 Ruby 2.3.0"),r("OutboundLink")],1)])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),r("p",[t._v("一、创建新的 Github 项目代码仓库(或采用已有的项目)\n二、注册并配置 Travis CI")]),t._v(" "),r("ul",[r("li",[t._v("注册：登录 "),r("a",{attrs:{href:"https://travis-ci.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("travis-ci.org"),r("OutboundLink")],1),t._v("，点击右上角的个人头像，使用Github第三方授权登录；")]),t._v(" "),r("li",[t._v("Travis 会列出 Github 上面你的所有仓库，以及你所属于的组织，选择你需要 Travis 帮你构建的仓库；")]),t._v(" "),r("li",[t._v("在 Repositories 选项，选择需要自动化部署的项目。开启build,，也就是点击 ❎ 变成 ✅ 的过程；")]),t._v(" "),r("li",[t._v("如果在 Repositories 选项中没有新建的项目，可以点击 Sync account 进行项目同步；")]),t._v(" "),t._m(5),t._v(" "),r("li",[t._v("个人访问令牌的生成可参考 "),r("a",{attrs:{href:"https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/",target:"_blank",rel:"noopener noreferrer"}},[t._v("为命令行创建个人访问令牌"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("加密环境变量参考："),r("a",{attrs:{href:"https://docs.travis-ci.com/user/environment-variables#Defining-encrypted-variables-in-travisyml",target:"_blank",rel:"noopener noreferrer"}},[t._v("在.travis.yml中加密环境变量"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("三、添加 Travis 配置文件 (.travis.yml)")]),t._v(" "),r("p",[t._v("在项目根目录的master 分支里面添加 .travis.yml 配置文件(该文件必须保存在 Github 仓库里面)，基本配置如下：")]),t._v(" "),t._m(6),r("p",[t._v("四、补充说明和使用技巧")]),t._v(" "),t._m(7),t._v(" "),t._m(8)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"travis-ci-github自动化部署方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci-github自动化部署方案","aria-hidden":"true"}},[this._v("#")]),this._v(" Travis CI Github自动化部署方案")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"参考网址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考网址","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考网址")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"travis-ci介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#travis-ci介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" Travis CI介绍")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("简介： Travis CI 是在软件开发领域中的一个在线的，分布式的持续集成服务，用来构建及测试在GitHub托管的代码，Travis对开源项目是免费，对私有项目是收费的。")]),t._v(" "),r("li",[t._v("环境准备\n"),r("ul",[r("li",[t._v("Github 公开项目")]),t._v(" "),r("li",[t._v("项目创建 gh-pages 分支")]),t._v(" "),r("li",[t._v("确保项目的 "),r("code",[t._v("Settings")]),t._v(" 里面的，设置 "),r("code",[t._v("GitHub Pages")]),t._v(" 的 Source 为  gh-pages branch。")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"travis-自动化部署项目配置流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#travis-自动化部署项目配置流程","aria-hidden":"true"}},[this._v("#")]),this._v(" Travis 自动化部署项目配置流程")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("点击 选中项目后面的 "),e("code",[this._v("Settings")]),this._v("，在 "),e("code",[this._v("Environment Variables")]),this._v("下面设置全局变量 GITHUB_TOKEN 值为个人的访问令牌")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[this._v("# 指定运行环境\nlanguage: node_js\n# 指定运行的node版本\nnode_js:\n- '8'\n# 运行的脚本命令\nscript:\n- yarn build\n# 指定监控的分支，只有指定的分支提交时才会运行脚本\nbranches:\n  only:\n  - master\n# 安装环境依赖和脚本\ninstall:\n- yarn install\n# 自动化部署命令\ndeploy:\n  provider: pages # 常见快捷部署功能，pages 指代要部署到  Github Pages\n  skip-cleanup: true  # 确保已skip-cleanup设置为true, 否则 Travis CI将删除在构建期间创建的所有文件\n  github-token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable\n  target-branch: gh-pages  # 要推送的分支，默认 gh-pages\n  local-dir: dist   # 推向分支的文件目录，相对于当前目录\n  on:\n    branch: master  # 监控的分支\n")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("p",[t._v("环境变量\n.travis.yml的env字段可以定义环境变量")]),t._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[t._v('env:\n- DB=postgres\n- SH=bash\n- PACKAGE_VERSION="1.0.*"\n')])])]),r("p",[t._v("注：有些环境变量(比如用户名和密码)不能公开。可以写在每个仓库的设置页面，Travis 会自动把它们加入环境变量，且只有管理员才能看到变量的值。")])]),t._v(" "),r("li",[r("p",[t._v("加密信息\n如果不放心保密信息明文存在 Travis 的网站，可以使用 Travis 提供的加密功能，直接在本地加密变量。")]),t._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[t._v("# 1. 通过 gem 安装 Ruby 的包 travis\n$ sudo gem install travis\n\n# 2. 在项目的根目录下，执行 travis encrypt命令\n$ travis encrypt SOMEVAR=secretvalue --add env.matrix\n")])])]),r("p",[t._v("注：上面命令中，"),r("code",[t._v("SOMEVAR")]),t._v("是要加密的变量名，"),r("code",[t._v("secretvalue")]),t._v(" 是要加密的变量值，--add参数会把输出自动写入.travis.yml，省掉了修改env字段的步骤。")])]),t._v(" "),r("li",[r("p",[t._v("加密文件\n如果要加密的是文件（比如私钥），Travis 提供了加密文件功能。")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"自动化部署到个人服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自动化部署到个人服务器","aria-hidden":"true"}},[this._v("#")]),this._v(" 自动化部署到个人服务器")])}],!1,null,null,null);n.options.__file="Travis-CI自动化部署.md";e.default=n.exports}}]);